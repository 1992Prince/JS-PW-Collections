ğŸ”µ ARIA & Playwright Locator Notes

ğŸš€ğŸš€ğŸš€ [IMP-INTERVIEW-POINT-START] ğŸš€ğŸš€ğŸš€



ğŸ§  What is ARIA?

ARIA = Accessible Rich Internet Applications

A set of HTML attributes designed to make web applications more accessible to assistive 
technologies (like screen readers).

Provides extra information about elements that might not be obvious from standard HTML.


ğŸ“Œ Why ARIA matters in Automation (Playwright context)

    In Playwright, getByRole() and other accessibility-based locators use the Accessibility Tree, 
    not just the raw DOM.

    This allows you to locate elements based on their ARIA role or label instead of 
    fragile CSS selectors.

    This is especially helpful when:
        - IDs/classes are dynamic
        - Elements are custom components (e.g., <div> styled to look like a button)


ğŸ“„ Common ARIA Attributes

| Attribute         | Purpose                                                         |
| ----------------- | --------------------------------------------------------------- |
| `role`            | Defines the element's **semantic role** (e.g., `role="button"`) |
| `aria-label`      | Gives an **accessible name** to the element                     |
| `aria-labelledby` | References another element that provides the label              |
| `aria-checked`    | Indicates selection state (checkbox/radio)                      |
| `aria-expanded`   | Indicates if collapsible content is open                        |

Example: <div role="button" aria-label="Play video" tabindex="0"></div>

Even though this is a <div>, ARIA makes it act like a button to accessibility tools.




ğŸ§ª Accessibility Tree vs DOM

    - DOM â†’ Whatâ€™s in the HTML structure.
    - Accessibility Tree â†’ Derived from the DOM plus ARIA attributes; used by assistive technologies.

    Example: <button aria-label="Submit Form"></button>

        DOM View: <button aria-label="Submit Form"></button>

        Accessibility Tree:
            Role = button
            Name = Submit Form



ğŸ–¥ï¸ Playwright Example with ARIA

// Locates button by role and name from Accessibility Tree
        await page.getByRole('button', { name: 'Submit Form' }).click();

âœ… Benefit: Works even if the HTML tag changes from <button> to <div> with role="button".



âš ï¸ Important Playwright Locator Behavior

    In Playwright, page.locator() does not immediately find or query the element on the webpage.
    It creates a "lazy" reference to that element and only resolves it when:
        - An action is performed (click, fill, hover, etc.)
        - An assertion is made (toBeVisible(), toHaveText(), etc.)

Example:
    const submitBtn = page.locator('#submit'); // Locator created, but DOM not queried yet
    await submitBtn.click(); // Now Playwright actually looks for it and clicks

    This design:

    âœ… Improves performance
    âœ… Automatically retries until the element is ready (auto-waiting)
    âœ… Handles dynamic DOM changes better



ğŸ’¡ Interview Insight

Q: "Why would you use getByRole() instead of a CSS selector in Playwright?"

    A:
    Because getByRole() queries the Accessibility Tree, making locators more resilient to structural 
    or style changes.
    If a button changes from <button> to a <div> with role="button", 
    my test still works without locator changes.



âœ…âœ…âœ… [IMP-INTERVIEW-POINT-END] âœ…âœ…âœ…






[Below content is for understanding]


ğŸ§  The Big Picture â€” Why ARIA Exists

Not everyone uses a website visually with a mouse.
Many users rely on assistive technologies â€” tools that help people with disabilities use 
computers.

    - Screen Readers â†’ read out the text on the page.
    - Braille Displays â†’ turn text into tactile braille.
    - Voice Control â†’ lets users operate a site with spoken commands.


âš ï¸ The Problem Without ARIA

HTML was originally designed with semantic tags:
    <button> â†’ button
    <nav> â†’ navigation
    <header> â†’ page header

But modern web apps (React, Angular, etc.) often replace native HTML controls with custom 
UI elements like:

<div class="btn big-blue">Click me</div>
    - Visually, this looks like a button.
    - But to a screen reader, itâ€™s just a <div> â€” it doesnâ€™t know you can click it.



ğŸ’¡ ARIA to the Rescue

ARIA (Accessible Rich Internet Applications) adds special attributes to tell assistive tech:
    - What the element is (role="button")
    - What state itâ€™s in (aria-checked="true")
    - Extra descriptions (aria-label="Play video")

Example: <div role="button" aria-label="Play video" tabindex="0"></div>
âœ… Now a screen reader will announce: "Button, Play video"
âœ… A voice control system can let you say: "Click Play video"


ğŸ“Š Accessibility Tree

Think of it as an alternate DOM made specifically for assistive tech.
Itâ€™s built by the browser using:
    - The DOM structure
    - Native HTML semantics
    - ARIA attributes

This tree is what screen readers use â€” not the raw DOM.

Example:

DOM - <div role="button" aria-label="Submit Form"></div>

Accessibility Tree View
Role: button
Name: Submit Form

Even though the HTML has no <button>, assistive tech knows itâ€™s a button because of ARIA.


ğŸ”µ Why This Matters in Playwright

Playwrightâ€™s getByRole() queries the Accessibility Tree, just like assistive tech.

Benefits:

    1) Resilient selectors â†’ Your locator works even if:

        - The HTML tag changes
        - The CSS class changes

    2) Future-proof â†’ UI redesigns that keep semantics wonâ€™t break your tests.

    3) Better readability â†’ getByRole('button', { name: 'Submit Form' }) is more descriptive than 
    page.locator('div.btn.primary').




ğŸ§  Key Point

getByRole() does NOT require ARIA attributes.

It works automatically if the element is:
    - A native semantic HTML element (e.g., <button>, <input>, <a>) â€” because the browser already 
      assigns a default role in the Accessibility Tree.
    - OR it has an explicit role="" / aria-* attribute.

â­ï¸ Case 1 â€” Works Without ARIA

    <button>Login</button>

    Browserâ€™s Accessibility Tree:
    Role: button
    Name: Login

    âœ… Playwright locator: await page.getByRole('button', { name: 'Login' }).click();

    Why it works?

    <button> is a semantic element â†’ Browser knows itâ€™s a button, no ARIA needed.


â­ï¸ Case 2 â€” No Semantics Without ARIA

    <div class="btn">Login</div>

    Browserâ€™s Accessibility Tree:
    Role: generic
    Name: ""

    ğŸš« This wonâ€™t work with: await page.getByRole('button', { name: 'Login' }); // âŒ Not found

    Why?
    <div> has no default role.
    No ARIA attributes â†’ Accessibility Tree has no "button" role.


â­ï¸ Case 3 â€” Custom UI Fixed with ARIA

<div role="button" aria-label="Login"></div>

Browserâ€™s Accessibility Tree:
Role: button
Name: Login

âœ… Works: await page.getByRole('button', { name: 'Login' }).click();



ğŸ’¡ Why ARIA Locators Survive HTML Changes

Imagine the HTML changes in a redesign:

Before: <button>Checkout</button>

After: <div role="button" aria-label="Checkout"></div>

If you used CSS locator: await page.locator('button:has-text("Checkout")').click(); // âŒ Breaks

If you used ARIA locator: await page.getByRole('button', { name: 'Checkout' }).click(); // âœ… Still works

Reason:

- getByRole() uses the Accessibility Tree, not raw tags.
- As long as the role & accessible name stay the same, HTML tag changes donâ€™t matter.


ğŸ“Œ Best Practice

- If the element is native semantic HTML â†’ getByRole() will just work.
- If itâ€™s a custom UI element â†’ Ask developers to add:

        - role="..." (semantic meaning)

        - aria-label or aria-labelledby (accessible name)
          Often, dev teams intentionally add data-test or ARIA attributes to help both 
          accessibility and automation.


For this HTML: <div role="button" aria-label="Checkout">SUBMIT</div>

ğŸ§  Accessibility Tree interpretation

The browser will map it as:
Role: button
Name: Checkout

ğŸ’¡ Why is the Name = "Checkout" and not "SUBMIT"?

The accessible name calculation follows a specific priority:

    1) aria-label â†’ Overrides visible text entirely.
    2) aria-labelledby â†’ References another elementâ€™s text.
    3) Visible text inside the element.

    In your case:
        - aria-label="Checkout" exists â†’ this takes priority.
        - So "SUBMIT" is ignored for accessibility purposes.

âœ… Playwright locator - await page.getByRole('button', { name: 'Checkout' }).click();

This will work, even though the visible text says "SUBMIT" â€” because Playwright queries 
the accessibility tree, not just visible DOM text.

If you remove aria-label: <div role="button">SUBMIT</div>

Accessibility Tree:
Role: button
Name: SUBMIT

Locator: await page.getByRole('button', { name: 'SUBMIT' }).click();
