
It is very imp to understand Auto-waiting concepts to make sure we write reliable and resilitent tests and
reduce flakiness in tests.


allTextContent() - this method don't wait for any condition, it just returns the text content of the element.
                   If some locator or element is not available when this method is executed
                   It will throw an error wch will create a flaky and unstable tests.
                   It returns promise


How playwright avoid flakiness in tests by auto-waiting for element to be visible and 
enabled before performing click action?

Playwright most of methods like click(), fill(), type(), textContent() etc are auto-waiting methods. Menaing...
But some methods like allTextContent() are not auto-waiting methods. and don't wait for any condition.

click waits for element to be visible and enabled before performing the click action.
If element is not visible or enabled within 30 secs then it will throw error.
So we will take one example where button is available after 20 secs and then click() method is executed.
This is how click method avoid flakiness by waiting for element to be visible and enabled before performing click action.


For methods like allTextContent() wch don't ahve any auto-waiting capability, we can use - 
 - wait for element - await page.waitForSelector('.big-success');
 - wait for particular response - await page.waitForResponse('https://example.com/api/success');
 - wait for network calls to be completed - await page.waitForLoadState('networkidle');
 - we can wait for particular event to be triggered - await page.waitForEvent('popup');
 - waitForFunction()
 - we can wait for api request
 - also we can just wait for hardcore time using page.waitForTimeout(5000); - not recommended



 ğŸ¯ Auto-Waiting in Playwright

ğŸ”¹ Introduction

One of Playwrightâ€™s biggest strengths is its auto-waiting mechanism.
Unlike Selenium (where you often need to add manual waits), Playwright waits automatically for 
elements to be in a ready state before performing any action.

ğŸ‘‰ Definition:

Playwright performs actionability checks on elements. 
It waits for all these checks to pass before executing the action. 
If checks donâ€™t pass within the timeout (default 30s), Playwright throws a TimeoutError.


This ensures reliable tests without adding arbitrary wait() or sleep() calls.

ğŸ”¹ Example of Auto-Waiting - await page.locator('#submit').click();

Before clicking, Playwright ensures:

    - The locator resolves to exactly one element.

    - Element is visible on the page.

    - Element is stable (not animating).

    - Element is receiving events (not covered by another element).

    - Element is enabled (not disabled).

    Only if all conditions are met â†’ click happens.
    If not â†’ TimeoutError.


    ğŸ”¹ Actionability Checks (What Playwright Waits For)

    | **Action**                         | Visible | Stable | Receives Events | Enabled | Editable |
    | ---------------------------------- | ------- | ------ | --------------- | ------- | -------- |
    | `locator.check()`                  | âœ…       | âœ…      | âœ…               | âœ…       | -        |
    | `locator.click()`                  | âœ…       | âœ…      | âœ…               | âœ…       | -        |
    | `locator.dblclick()`               | âœ…       | âœ…      | âœ…               | âœ…       | -        |
    | `locator.setChecked()`             | âœ…       | âœ…      | âœ…               | âœ…       | -        |
    | `locator.tap()`                    | âœ…       | âœ…      | âœ…               | âœ…       | -        |
    | `locator.uncheck()`                | âœ…       | âœ…      | âœ…               | âœ…       | -        |
    | `locator.hover()`                  | âœ…       | âœ…      | âœ…               | -       | -        |
    | `locator.dragTo()`                 | âœ…       | âœ…      | âœ…               | -       | -        |
    | `locator.screenshot()`             | âœ…       | âœ…      | -               | -       | -        |
    | `locator.fill()`                   | âœ…       | -      | -               | âœ…       | âœ…        |
    | `locator.clear()`                  | âœ…       | -      | -               | âœ…       | âœ…        |
    | `locator.selectOption()`           | âœ…       | -      | -               | âœ…       | -        |
    | `locator.selectText()`             | âœ…       | -      | -               | -       | -        |
    | `locator.scrollIntoViewIfNeeded()` | -       | âœ…      | -               | -       | -        |
    | `locator.blur()`                   | -       | -      | -               | -       | -        |
    | `locator.dispatchEvent()`          | -       | -      | -               | -       | -        |
    | `locator.focus()`                  | -       | -      | -               | -       | -        |
    | `locator.press()`                  | -       | -      | -               | -       | -        |
    | `locator.pressSequentially()`      | -       | -      | -               | -       | -        |
    | `locator.setInputFiles()`          | -       | -      | -               | -       | -        |

    
    ğŸ”¹ Why Is This Important?

        - No flaky tests: Prevents clicks on invisible or disabled elements.
        
        - Less boilerplate: No need for explicit waits like waitForSelector().
        
        - Smarter testing: Ensures actions happen only when meaningful.


        ğŸ”¹ Quick Mnemonic for Remembering Checks

        ğŸ‘‰ For click actions:
                - V-S-R-E â†’ Visible, Stable, Receives events, Enabled




                1ï¸âƒ£ Default Timeout (Clarification)

âœ… Youâ€™re right â€” default timeout is 30 seconds (not 5 seconds).

This applies to actions like click(), fill(), check() and to expect() assertions.

Can be overridden using:

ğŸ”¹ Ways to Override Timeout

        1ï¸âƒ£ At Test Level

            test.setTimeout(60000); // 60s for this test


        2ï¸âƒ£ At Page Level

            page.setDefaultTimeout(10000); // 10s for all page actions in this test


        3ï¸âƒ£ In Config File

            // playwright.config.ts
            const config = {
            timeout: 60000,   // global test timeout
            expect: { timeout: 10000 } // default for assertions
            };


        4ï¸âƒ£ At Locator/Action Level

            await page.locator('button').click({ timeout: 10000 });



2ï¸âƒ£ Methods with Auto-Waiting vs Without

âœ… Methods with Auto-Wait (have actionability checks built in):

        locator.click()

        locator.fill()

        locator.check() / locator.uncheck()

        locator.dblclick()

        locator.hover()

        locator.tap()

        locator.selectOption()

        locator.dragTo()

        locator.screenshot()

        ğŸ‘‰ Basically user-like actions (interactions with the DOM).

âŒ Methods without Auto-Wait (no actionability checks):

        locator.focus()

        locator.blur()

        locator.dispatchEvent()

        locator.press() / locator.pressSequentially()

        locator.setInputFiles()

        ğŸ‘‰ These donâ€™t wait for visibility, stability, etc. â†’ If element is not ready, your test may become flaky.



        3ï¸âƒ£ How to Avoid Flakiness When Using Non-Auto-Wait Methods

        When using methods without auto-waiting, you need to explicitly synchronize your test.
        Here are strategies ğŸ‘‡

        ğŸ”¹ Wait for Element
                await page.waitForSelector('.big-success');
        
        ğŸ”¹ Wait for Response (API to return success)
                await page.waitForResponse('https://example.com/api/success');
        
        ğŸ”¹ Wait for Network Idle (all requests complete)
                await page.waitForLoadState('networkidle'); // what are other options after networkidle?
        
        ğŸ”¹ Wait for Event (e.g., popup, download, navigation)
                await page.waitForEvent('popup');
        
        ğŸ”¹ Wait for Custom Condition
                await page.waitForFunction(() => window.appReady === true);
        
        ğŸ”¹ Wait for API Request (explicit)
                const [response] = await Promise.all([
                page.waitForResponse('**/login-success'),
                page.click('#login-btn')
                ]);
        
        ğŸ”¹ Hard Wait (âš ï¸ not recommended, last resort)
                await page.waitForTimeout(5000);

        ğŸ”¹ page.locator('#delayedText').waitFor();



                4ï¸âƒ£ Interview-Ready Answer

                ğŸ’¡ Q: What is auto-waiting in Playwright?
                
                Auto-waiting means Playwright automatically waits for elements to be actionable before performing actions. For example, before a click(), it waits for the element to be visible, stable, enabled, and receiving events. The default timeout is 30 seconds, after which it throws a TimeoutError.
                
                ğŸ’¡ Q: Give examples of methods that auto-wait and some that donâ€™t.
                
                Auto-wait: click(), fill(), check(), hover(), selectOption()
                Non auto-wait: focus(), blur(), dispatchEvent(), press(), setInputFiles()
                
                ğŸ’¡ Q: How do you avoid flaky tests with non-auto-wait methods?
                
                By explicitly synchronizing the test using waits:
                
                waitForSelector() for element presence
                
                waitForResponse() for API
                
                waitForLoadState('networkidle') for network stability
                
                waitForEvent() for specific events
                
                waitForFunction() for custom conditions
                
                As a last resort, waitForTimeout(), though itâ€™s not recommended.



Defenitions of each conditions

ğŸ”¹ Visible

ğŸ‘‰ â€œElement tab visible maana jata hai jab uska bounding box empty na ho aur visibility:hidden na ho. 
Agar display:none hai to visible nahi, lekin agar opacity:0 hai to Playwright usse visible hi maanta hai.â€

Element is considered visible when it has non-empty bounding box and does not have visibility:hidden computed style.

Note that according to this definition:

Elements of zero size are not considered visible.
Elements with display:none are not considered visible.
Elements with opacity:0 are considered visible.

ğŸ”¹ Stable

ğŸ‘‰ â€œStable ka matlab hai element animation ya transition mein na ho. Playwright do consecutive animation frames 
    check karta hai, agar bounding box change nahi hota to element stable maana jata hai.â€

    Element is considered stable when it has maintained the same bounding box for at least two consecutive 
    animation frames.

ğŸ”¹ Enabled

ğŸ‘‰ â€œEnabled ka matlab hai element disabled state mein na ho. Agar button, input ya textarea pe disabled attribute 
     laga ho ya wo kisi disabled fieldset ke andar ho to element enabled nahi hota.â€

     Element is considered enabled when it is not disabled.

     Element is disabled when:
     
     it is a <button>, <select>, <input>, <textarea>, <option> or <optgroup> with a [disabled] attribute;
     it is a <button>, <select>, <input>, <textarea>, <option> or <optgroup> that is a part of a <fieldset> with a [disabled] attribute;
     it is a descendant of an element with [aria-disabled=true] attribute

ğŸ”¹ Editable

ğŸ‘‰ â€œEditable ka matlab hai element enabled bhi ho aur readonly bhi na ho. Jaise ek input field jo readonly 
     attribute ke saath diya ho wo editable nahi hai.â€

     Element is considered editable when it is enabled and is not readonly.

Element is readonly when:

it is a <select>, <input> or <textarea> with a [readonly] attribute;
it has an [aria-readonly=true] attribute and an aria role that supports it.

ğŸ”¹ Receives Events

ğŸ‘‰ â€œReceives Events ka matlab hai element ke upar koi aur overlay ya blocker na ho. Jo bhi click ya tap main kar 
    raha ho, wo actual element tak pohonchna chahiye. Agar koi spinner ya modal upar hai to element events receive 
    nahi karega.â€

    Element is considered receiving pointer events when it is the hit target of the pointer event at the action point. For example, when clicking at the point (10;10), Playwright checks whether some other element (usually an overlay) will instead capture the click at (10;10).

    For example, consider a scenario where Playwright will click Sign Up button regardless of when the locator.click() call was made:
    
    page is checking that user name is unique and Sign Up button is disabled;
    after checking with the server, the disabled Sign Up button is replaced with another one that is now enabled.



    ğŸ‘‰ Forcing actions
    
Some actions like locator.click() support force option that disables non-essential actionability checks, 
    
for example passing truthy force to locator.click() method will not check that the target element 
actually receives click events.


   ğŸ‘‰  Assertions

Playwright includes auto-retrying assertions that remove flakiness by waiting until the condition is met, 
similarly to auto-waiting before actions.

Assertion	                    Description
expect(locator).toBeAttached()	Element is attached
expect(locator).toBeChecked()	Checkbox is checked
expect(locator).toBeDisabled()	Element is disabled
expect(locator).toBeEditable()	Element is editable
expect(locator).toBeEmpty()	Container is empty
expect(locator).toBeEnabled()	Element is enabled
expect(locator).toBeFocused()	Element is focused
expect(locator).toBeHidden()	Element is not visible
expect(locator).toBeInViewport()	Element intersects viewport
expect(locator).toBeVisible()	Element is visible
expect(locator).toContainText()	Element contains text
expect(locator).toHaveAttribute()	Element has a DOM attribute
expect(locator).toHaveClass()	Element has a class property
expect(locator).toHaveCount()	List has exact number of children
expect(locator).toHaveCSS()	Element has CSS property
expect(locator).toHaveId()	Element has an ID
expect(locator).toHaveJSProperty()	Element has a JavaScript property
expect(locator).toHaveText()	Element matches text
expect(locator).toHaveValue()	Input has a value
expect(locator).toHaveValues()	Select has options selected
expect(page).toHaveTitle()	Page has a title
expect(page).toHaveURL()	Page has a URL
expect(response).toBeOK()	Response has an OK status
Learn more in the assertions guide.