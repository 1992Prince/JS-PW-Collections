ðŸ”Ž Code Breakdown & Execution Order

const processENV = process.env.TEST_ENV;
const env = processENV || 'dev';   // <- Step 1
console.log(`Running tests in ${env} environment`);  // <- Step 2

ðŸ“Œ Step 1: Read Environment Variable

    process.env.TEST_ENV â†’ Reads value from the terminal/OS.

    If itâ€™s not set, default = 'dev'.
    Example:

    If you run â†’ TEST_ENV=qa npx playwright test â†’ env = 'qa'.

    If you run normally â†’ npx playwright test â†’ env = 'dev'.


ðŸ“Œ Step 2: Initialize Default Config
        By default â†’ config is set with dev credentials.

    const config = {
        apiUrl: 'https://conduit-api.bondaracademy.com/api',
        userEmail: 'testbondar1@gmail.com',
        userPassword: 'testbondar1',
    }




ðŸ“Œ Step 3: QA Override
    If environment is 'qa', overwrite email & password.

        if (env === 'qa') {
            config.userEmail = 'testbondar2@gmail.com',
            config.userPassword = 'testbondar2';
        };





ðŸ“Œ Step 4: Prod Override
    If environment is 'prod', overwrite with prod credentials.

    if (env === 'prod') {
        config.userEmail = 'testbondarprod@gmail.com',
        config.userPassword = 'testbondarprod';
    };


ðŸ“Œ Step 5: Export Final Config

    Now whichever environment you selected â†’ config is ready to be imported anywhere in your tests.

    export { config }


----------------------------------------------------------------


âš¡ Execution Flow Example

ðŸ” Case 1: Default (dev) - npx playwright test

ðŸ‘‰ Output: Running tests in dev environment

ðŸ‘‰ Config used:

{
  apiUrl: 'https://conduit-api.bondaracademy.com/api',
  userEmail: 'testbondar1@gmail.com',
  userPassword: 'testbondar1'
}


ðŸ” Case 2: QA - TEST_ENV=qa npx playwright test  - [this command will run only in linux/mac for windows we need to use SET]

ðŸ‘‰ Output: Running tests in qa environment

ðŸ‘‰ Config used:

{
  apiUrl: 'https://conduit-api.bondaracademy.com/api',
  userEmail: 'testbondar2@gmail.com',
  userPassword: 'testbondar2'
}


ðŸ” Case 3: PROD - TEST_ENV=prod npx playwright test  - [this command will run only in linux/mac for windows we need to use SET]

ðŸ‘‰ Output: Running tests in prod environment

ðŸ‘‰ Config used:

{
  apiUrl: 'https://conduit-api.bondaracademy.com/api',
  userEmail: 'testbondarprod@gmail.com',
  userPassword: 'testbondarprod'
}



ðŸŽ¯ Interview-ready Explanation

        process.env.TEST_ENV reads environment variable.

        || 'dev' ensures default = dev.

        Config object is initialized with dev values.

        Then conditionally overridden if environment is qa or prod.

        Finally exported for use across tests.


ðŸ‘‰ Q- okay but for dev, we haven't initialized any email and password

Actually, in your code dev is already initialized by default. Look at this part ðŸ‘‡

const config = {
    apiUrl: 'https://conduit-api.bondaracademy.com/api',
    userEmail: 'testbondar1@gmail.com',   // <-- dev email
    userPassword: 'testbondar1',          // <-- dev password
}

    - When the script starts, it always creates config with these default values.

    - These defaults act as your dev credentials.

    - Then, depending on env, the script checks:


ðŸ”‘ Summary for Interview

    Dev: no explicit if condition is required, because the config object is initialized with dev values by default.

    QA/Prod: handled via overriding based on environment variable.

    Thatâ€™s why for dev you already have email+password, even though you didnâ€™t add a separate block.


ðŸ‘‰ Q- OR suppose at run time we are passing env as stg then

Right now your code only checks for qa and prod

if (env === 'qa') { ... }
if (env === 'prod') { ... }

ðŸ‘‰ If you pass stg (staging) at runtime, then:

        process.env.TEST_ENV = "stg"

        So env = "stg"

        The code checks:

        Is "stg" === "qa" âŒ No

        Is "stg" === "prod" âŒ No

        Since no condition matches, no overwrite happens.
        That means your config will still use the default (dev) credentials.



ðŸ”‘ Interview Answer

        By default, dev creds are initialized.

        If you pass an env (qa/prod/stg), the config overrides them.

        If you pass an unsupported env (like "stg" without adding logic), it will fallback to dev config 
            (could be dangerous).

        Best practice: add an explicit error for unknown envs to avoid silent fallback.


        if (!['dev', 'qa', 'prod', 'stg'].includes(env)) {
        throw new Error(`Unknown environment: ${env}`);
        }
