| **Category**             | **Option**   | **Used for**                                                             |
| ------------------------ | ------------ | ------------------------------------------------------------------------ |
| ğŸ¥ **Recording Options** | `screenshot` | Take screenshotsâ€”on failure or alwaysâ€”for debugging UI issues.           |
|                          | `trace`      | Capture Playwright trace viewer (DOM snapshots, actions, console, etc.). |
|                          | `video`      | Record test sessions for review or debugging.                            |

Recording Options are helpful for taking screenshots, videos and traces of tests



ğŸ–¼ï¸ screenshot Option in Playwright

ğŸ“Œ Purpose:
Ye option decide karta hai ki Playwright kab screenshot capture kare â€” especially useful for debugging 
failed test cases.

ğŸ”§ Syntax in playwright.config.js:

use: {
  screenshot: 'off' // ya 'on', 'only-on-failure'
}

ğŸ”„ Available Values:
| Value               | Meaning                                                                 |
| ------------------- | ----------------------------------------------------------------------- |
| `'off'`             | No screenshots taken (default).                                         |
| `'on'`              | Screenshot le har test ke baad â€” chahe pass ho ya fail.                 |
| `'only-on-failure'` | Sirf tab screenshot le jab test **fail** hota hai (ğŸ‘ˆ most useful one and preferred). |



ğŸ§  Real-World Use Cases (Hinglish mein)



âœ… 1. 'only-on-failure' â€” Most Common

"CI/CD mein jab test fail ho jata hai, toh mujhe samajhna hota hai ki page kis state mein tha.
Is option se Playwright automatically fail hone wale test ka screenshot capture kar leta hai."

ğŸ“Œ Helps in: Debugging failed UI, broken selectors, missing elements, popups

use: {
  screenshot: 'only-on-failure'
}

ğŸ“· 2. 'on' â€” Always Capture - Agar mujhe visual documentation chahiye ya visual regression testing karni ho â€” toh 
                                main har test ka screenshot le leta hoon."

ğŸš« 3. 'off' â€” No Screenshots : Agar mujhe sirf speed chahiye ya screenshots ki zarurat nahi hai â€” tab off rakhte hain.

        Helps in: API-only tests or CLI runs where output se hi kaam chal jaata hai

ğŸ†• 4. 'on-first-failure' â€” Screenshot Option
        "on-first-failure" means Playwright will take a screenshot only for the first failure in a test 
         file â€” not for every failed test.

ğŸ¤” Why use 'on-first-failure'?
"Kabhi-kabhi test file mein multiple tests hote hain. Agar pehla hi test fail ho jata hai, toh baaki tests 
bhi us failure ki wajah se fail ho sakte hain.
In that case, mujhe sirf pehle failure ka screenshot chahiye hota hai, 
jisse root cause pata chal jaye â€” baaki failures ignore kiye ja sakte hain."

ğŸ§  Real-World Use Case:

Imagine you have 10 tests in a file. First test fails due to navigation error â€” baaki sab fail ho jaate hain 
kyunki page load hi nahi hua.

In that case:

'only-on-failure': captures screenshot for all 10 failed tests.
'on-first-failure': captures screenshot for only the first failed test.

âš¡ Faster & storage-efficient debugging.




ğŸ“‚ Default Screenshot Path:
----------------------------------

After test execution, Playwright automatically creates a test-results/ folder in your 
root directory to store all artifacts like screenshots, traces, logs, etc.

ğŸ–¼ï¸ 2. If screenshot is set to 'on' or 'only-on-failure'[Pre-requisite for testing]:

then trigger one test suite with command - npx playwright test tests/example.spec.ts

Screenshots will be saved automatically

The storage path is: test-results/<test-name>-<browser-name>/


ğŸ“¦ Suppose u r running your test in all 3 browsers then 
    Playwright will create 3 separate folders for each browser inside test-results/, like:

Playwright by default saves screenshots inside:

test-results/
  â””â”€â”€ your-test-name-browsername/
        â””â”€â”€ test-failure.png



ğŸ¯ Customize Screenshot Manually
-------------------------------------
Aap test ke andar bhi screenshot le sakte ho custom path ke saath:

for this , make screenshot in use : "off" and then add page.screenshot()

mark that test with only so that when u run only that specific test should run and add below code:

await page.screenshot({ path: 'screenshots/imagename1.png', fullPage: true })

Above code will take screenshot of full page and create screenshots folder if it is not there
and then store image with name imagename1.png 

But when u run same script again, then it will override same image and u will loose your image.

To avoid it lets append it with timestamp:

ğŸ•’ Timestamp Format for File Naming : YYYY-MM-DD_HH-mm-ss

// Create timestamp
  const timestamp = new Date().toISOString().replace(/[:]/g, '-').replace('T', '_').split('.')[0];

  // Save screenshot with timestamp
  await page.screenshot({ path: `screenshots/example_${timestamp}.png` });

  ğŸ” Breakdown of Timestamp Logic:
  new Date().toISOString()                     // 2025-08-02T15:45:10.123Z
.replace(/[:]/g, '-')                        // 2025-08-02T15-45-10.123Z
.replace('T', '_')                           // 2025-08-02_15-45-10.123Z
.split('.')[0]                               // 2025-08-02_15-45-10

âœ… Result: Clean filename-safe timestamp like example_2025-08-02_15-45-10.png

when I ran single test with only one project then I got screenshot name- example_2025-08-02_08-37-29.png

So u can see that we have made screeshot property off in use but still we are are override this property
for speicic test and take screenshot and store it in custom result path.





Q - 
await page.screenshot({ path: 'screenshots/homepage.png' }); 

VS

await page.screenshot({ path: 'screenshots/full.png', fullPage: true });

âœ… Comparison: Regular vs Full Page Screenshot
| Code Line                                                                  | Description                                                                                                                     |
| -------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| `await page.screenshot({ path: 'screenshots/homepage.png' });`             | ğŸ“¸ Takes a screenshot of **only the visible viewport** (whatever is currently visible on the screen).                           |
| `await page.screenshot({ path: 'screenshots/full.png', fullPage: true });` | ğŸ“¸ Takes a screenshot of the **entire scrollable page**, including content below the fold (even if it's not visible initially). |



ğŸ“ ğŸ”” Important Note: Manual Screenshot Still Works Even if Global screenshot is 'off'
"Agar aap playwright.config.js mein screenshot: 'off' set karte ho, toh Playwright automatically screenshots 
capture nahi karega.

Lekin agar aap test ke andar manually page.screenshot() likhte ho, toh wo screenshot fir bhi capture hoga."




--------------------------------------------------------------------------------------------------------

ğŸ–¼ï¸ video Option in Playwright

video option allow karta hai browser session ka video record karna during test run â€” super useful 
for debugging, especially in CI when tests fail.

ğŸ“ Where to configure it?

You can set video option in:

use: {
  video: 'on' // or 'off', 'retain-on-failure', etc.
}

Or you can use it per-project or per-test using test.use().

ğŸ“‚ Video Save Path
By default, videos are saved in:

test-results/<test-name>-<browser>/video.webm

like 
test-results/example-has-title-chromium/video.webm

Here extension of video is webm [super imp]

âœ… All video Options â€” With Use Cases

1ï¸âƒ£ 'off' (Default)
ğŸ“Œ No video recording at all.

Useful when you're confident and want faster runs without storage overhead.
Mostly we prefer this , bcoz storing videos makes storage heavy

2ï¸âƒ£ 'on'
    ğŸ“Œ Record video for every test â€” pass or fail. [not preferred until visual testing is done]

ğŸ¯ Use when:

    Doing visual documentation
    Reviewing all test sessions
    Performing visual validation

ğŸ”» Downside: All videos get stored, even for passing tests (may consume space).

3ï¸âƒ£ 'retain-on-failure' âœ… (Most common and preffered)

ğŸ“Œ Record video for all tests, but keep only if the test fails.

ğŸ¯ Use when:

    Running tests in CI
    Want videos only when something breaks
    Storage-conscious setup

ğŸ§  Highly recommended for CI pipelines â€” you only keep what matters.


4ï¸âƒ£ 'on-first-retry'

ğŸ“Œ Record video only when a test is retried for the first time.

ğŸ¯ Use when:

    You allow retries (retries: 1 or more)
    You want to investigate flakiness
    You want to avoid recording on every first attempt

ğŸ§ª Example flow:

    First run: no video
    First retry: video recorded
    Second retry (if configured): no video

5ï¸âƒ£ 'retry-with-video'

ğŸ“Œ Donâ€™t record video initially, but record for all retries (if the test fails).

ğŸ¯ Use when:

    You want to avoid recording unnecessary video
    Only want retry attempts tracked
    Good balance between performance & debug ability

ğŸ§ª Example flow:

First run: no video
Retry 1: video recorded
Retry 2: video recorded

ğŸ¯ Summary Table

| Option                | Records Video?           | Keeps Video?     | Best For                               |
| --------------------- | ------------------------ | ---------------- | -------------------------------------- |
| `'off'`               | âŒ No                     | âŒ No             | Speed-focused, no need for visual logs |
| `'on'`                | âœ… Every run              | âœ… All videos     | Visual audit, training, doc capture    |
| `'retain-on-failure'` | âœ… Every run              | âŒ Only if failed | CI/CD, debug failed tests only         |
| `'on-first-retry'`    | âŒ 1st run, âœ… 1st retry   | âœ… Retry only     | Debugging flaky tests                  |
| `'retry-with-video'`  | âŒ 1st run, âœ… All retries | âœ… Retry only     | Retry-focused debugging                |


ğŸ¯ Scenario:


You have:

retries: 3
use: { video: <option> }

So the test will run:

    ğŸŸ¢ 1 initial attempt
    ğŸ” Up to 3 retries (if it fails)

Letâ€™s now see how Playwright behaves with each video option during these attempts.

âœ… 1. video: 'retain-on-failure'

Attempt	Video Recorded?	Kept in test-results?
Run #1	    âœ… Yes	âŒ No (test failed)
Retry #1	âœ… Yes	âŒ No (test failed)
Retry #2	âœ… Yes	âŒ No (test failed)
Retry #3	âœ… Yes	âœ… Yes (if still failed)

ğŸ¯ Only keeps video of the final failed attempt, if the test fails even after all retries.

ğŸ’¬ Best for: Avoiding video clutter â€” only keep videos if test ultimately fails.


âœ… 2. video: 'on-first-retry'

Attempt	Video Recorded?	Kept in test-results?
Run #1	    âŒ No	âŒ No
Retry #1	âœ… Yes	âœ… Yes (only if fails here)
Retry #2	âŒ No	âŒ No
Retry #3	âŒ No	âŒ No

ğŸ¯ Only Retry #1 is recorded, no matter how many retries you allow.

ğŸ’¬ Best for: Investigating flaky tests â€” video only when test retries once.


âœ… 3. video: 'retry-with-video'
Attempt	Video Recorded?	Kept in test-results?
Run #1	    âŒ No	âŒ No
Retry #1	âœ… Yes	âŒ No (unless final fail)
Retry #2	âœ… Yes	âŒ No
Retry #3	âœ… Yes	âœ… Yes (if test fails completely)

ğŸ¯ Records every retry (Retry #1, #2, #3), but keeps only the last one that fails, if test fails overall.

ğŸ’¬ Best for: Full retry tracking, without recording first attempt.


------------------------------------------------------------

Explain to interviewer like below:

ğŸ¯ Then, Explain the Differences in Simple Terms
1ï¸âƒ£ retain-on-failure
"This one records video for every test attempt, but it only saves the video if the test fails finally, even after all retries.
Itâ€™s perfect when we want to debug only failed test cases and avoid saving videos for passing tests."

ğŸ§ª Example:

Test runs â†’ retry 3 times â†’ still fails

âœ… Only the last failed attempt's video is saved

ğŸ§  Ideal for: CI/CD pipelines to keep storage clean, and still debug failures when needed.

2ï¸âƒ£ on-first-retry
"Here, Playwright doesn't record video during the first run, but starts recording only on the first retry â€” and only that one retry is recorded.
Itâ€™s useful when you want to investigate flaky tests â€” only recording when a test fails and retries once."

ğŸ§ª Example:

Test fails on first run

âœ… First retry video recorded

âŒ No video for further retries

ğŸ§  Ideal for: Teams troubleshooting flakiness, not persistent failures.

3ï¸âƒ£ retry-with-video
"In this one, Playwright only starts recording when retries begin, and it records all retries, not just the first.
But again, like others, it only saves the video if the test fails after all retries."

ğŸ§ª Example:

Test retries 3 times

âœ… All retries are recorded

âœ… Last failed video is saved (if final result is fail)

ğŸ§  Ideal for: Teams that want full visibility of retries, especially for debugging unstable scenarios.


| Option              | When It Records     | When It Saves                     |
| ------------------- | ------------------- | --------------------------------- |
| `retain-on-failure` | Always              | Only if test fails finally        |
| `on-first-retry`    | Only on first retry | Only if test fails at first retry |
| `retry-with-video`  | All retries         | Only if test fails finally        |
