âœ… Hooks in Playwright Test

    Playwright provides test hooks that let you run setup and teardown logic at different levels:

    1. beforeAll / afterAll

        Runs once per file (before/after all tests in that file).

        Good for expensive setup (e.g., starting a server, seeding DB).


import { test } from '@playwright/test';

test.beforeAll(async () => {
  console.log('ðŸš€ Run once before all tests');
});

test.afterAll(async () => {
  console.log('ðŸ›‘ Run once after all tests');
});




2. beforeEach / afterEach

Runs before/after every test in the file.

Great for resetting state, opening fresh pages, or logging.


        test.beforeEach(async ({ page }) => {
        await page.goto('https://example.com');
        });

        test.afterEach(async ({ page }) => {
        await page.close();
        });


ðŸ” Execution Order

Letâ€™s see how they run with two tests:

import { test } from '@playwright/test';

test.beforeAll(() => console.log('âž¡ï¸ beforeAll'));
test.afterAll(() => console.log('âž¡ï¸ afterAll'));

test.beforeEach(() => console.log('âž¡ï¸ beforeEach'));
test.afterEach(() => console.log('âž¡ï¸ afterEach'));

test('Test A', () => console.log('ðŸ§ª Test A'));
test('Test B', () => console.log('ðŸ§ª Test B'));


The order of logs will be:

âž¡ï¸ beforeAll
âž¡ï¸ beforeEach
ðŸ§ª Test A
âž¡ï¸ afterEach
âž¡ï¸ beforeEach
ðŸ§ª Test B
âž¡ï¸ afterEach
âž¡ï¸ afterAll

âœ… Thatâ€™s the core of Playwright hooks â€” theyâ€™re just lifecycle functions around your tests.



1) Can we have 2 beforeAll hooks in the same spec file?

    ðŸ‘‰ Yes. You can define multiple beforeAll (and afterAll, beforeEach, afterEach) hooks in the same spec file.

    They will run in the order they are declared (top to bottom).

    Same rule applies for multiple afterAll â€” they also run in declaration order.


import { test } from '@playwright/test';

test.beforeAll(() => console.log('beforeAll #1'));
test.beforeAll(() => console.log('beforeAll #2'));

test('sample test', () => console.log('test runs'));

test.afterAll(() => console.log('afterAll #1'));
test.afterAll(() => console.log('afterAll #2'));


Execution order:

beforeAll #1
beforeAll #2
test runs
afterAll #1
afterAll #2



2) If we have 2 spec files, each with beforeAll and afterAll, and we run them together â€” whatâ€™s the execution order?

ðŸ‘‰ Playwright runs each spec file independently.
So:

Hooks in File A wonâ€™t affect File B.

Within each file, the beforeAll â†’ tests â†’ afterAll order applies.

The order in which spec files run depends on how the test runner schedules them 
(can be parallel by default unless you configure fullyParallel: false in playwright.config.ts).


Example:

fileA.spec.ts

import { test } from '@playwright/test';

test.beforeAll(() => console.log('A beforeAll'));
test('A test', () => console.log('A test'));
test.afterAll(() => console.log('A afterAll'));


fileB.spec.ts

import { test } from '@playwright/test';

test.beforeAll(() => console.log('B beforeAll'));
test('B test', () => console.log('B test'));
test.afterAll(() => console.log('B afterAll'));


Possible execution (if sequential):

A beforeAll
A test
A afterAll
B beforeAll
B test
B afterAll

âš ï¸ If tests are parallel, A and B may interleave, but inside each file order is guaranteed



3) If we have 2 spec files, and only one has beforeAll/afterAll, what happens?

ðŸ‘‰ Hooks are local to their file.
    If File A has hooks and File B doesnâ€™t, then:

    File A will run its beforeAll â†’ tests â†’ afterAll.

    File B will just run its tests (no extra setup/teardown).

    Example:

    fileA.spec.ts

import { test } from '@playwright/test';

test.beforeAll(() => console.log('A beforeAll'));
test('A test', () => console.log('A test'));
test.afterAll(() => console.log('A afterAll'));


fileB.spec.ts


import { test } from '@playwright/test';

test('B test', () => console.log('B test'));


Possible execution:

A beforeAll
A test
A afterAll
B test

(or B test could run first if in parallel).


âœ… Summary:

Yes, multiple beforeAll/afterAll are allowed in the same file â†’ executed in declaration order.

Each spec file has its own hook lifecycle, independent of others.

If only one file has hooks, they apply only to that file â€” other files just run their tests normally.